<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE COMMA</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/109.index.css">
    <link rel="stylesheet" href="./css/109.banner_slide.css">
    <script src="./js/109.itemlist.js"></script>
    <script src="./js/109.banner_slide.js"></script>
    <style>

    </style>
</head>
<body>
    <div class="wrap">
        <div class="layer_popup">
            <div class="popup_main">
                <div class="popup_upper"></div>
                <ul class="popup_downer_ul">
                    <li class="popup_downer_li">세일이벤트</li>
                    <li class="popup_downer_li">카카오스토리</li>
                    <li class="popup_downer_li">신상품바로가기</li>
                    <li class="popup_downer_li">INSTAGRAM<br>인스타그램팔로우</li>
                    <li class="popup_downer_li">REVIEW<br>구매후기이벤트</li>
                    <li class="popup_downer_li">JOIN<br>회원가입이벤트</li>
                </ul>
            </div>
            <div class="popup_footer">
                <label for="btn_not_today" class="popup_not_today">오늘 하루 열지 않음<input type="checkbox" name="" id="btn_not_today"></label>
                <div class="popup_close">닫기 X</div>
            </div>
        </div>
        <div class="top_banner">
            <div class="top_banner_txt">탑배너 텍스트 1/3</div>
            <div class="top_banner_txt">탑배너 텍스트 2/3</div>
            <div class="top_banner_txt">탑배너 텍스트 3/3</div>
        </div>
        <div class="header">
            <div class="logo">
                <a href="#"></a>
            </div>
            <ul class="menu_ul">
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_li">menu</li>
                <li class="menu_pan">
                    <div class="pan_container">
                        <div class="pan p1">1</div>
                        <div class="pan p2">2</div>
                        <div class="pan p3">3</div>
                        <div class="pan p4">4</div>
                        <div class="pan p5">5</div>
                        <div class="pan p5">6</div>
                        <div class="pan p5">7</div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="main_banner">
            <div class="banner"></div>
            <div class="banner"></div>
            <div class="banner"></div>
            <div id="btn_l" class="btn"></div>
            <div id="btn_r" class="btn"></div>
            <div class="indicator"></div>
        </div>
        <div class="container">
            <!-- <div class="sec">
                <div class="sec_title"></div>
                <div class="sec_body">
                    <div class="item_box">
                        <div class="item_img">
                            <img src="" alt="">
                        </div>
                        <div class="item_info">
                            <div class="item_title"></div>
                            <div class="item_price"></div>
                            <div class="item_desc"></div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
    <script>
        $(document).ready(function(){
//////////////////////////탑배너///////////////////////////////
            let topIndex = 0;
            $(".top_banner_txt").eq(topIndex % 3).css({
                    top: 0
                })
            let topItv = setInterval(function(){
                $(".top_banner_txt").eq(topIndex % 3).animate({
                    top: "-40px"
                }, 500).animate({
                    top: "40px"
                }, 0)
                $(".top_banner_txt").eq((topIndex + 1) % 3).animate({
                    top: 0
                }, 500)
                topIndex += 1;
            }, 1500);
/////////////////////////////////////////////////////////////
//////////////////////////팝업 이미지///////////////////////////
            $(".popup_downer_li").mouseenter(function(){
                $(".popup_downer_li").css({
                    "background-color": "#fff"
                })
                $(this).css({
                    "background-color": "#eee"
                })
                $(".popup_upper").css({
                    background: `url(./img/theComma/popup/big_img_0${$(this).index() + 1}.jpg) center / cover`
                })
            })
////////////////////////////////////////////////////////////
////////////////////////팝업 이동////////////////////////////
            let updown = 0;
            let ox, oy;
            let px, py;
            let popup = $(".popup_main");
            document.getElementsByClassName("popup_main")[0].addEventListener("mousedown", function(){
                updown = 1;
                ox = event.offsetX;
                oy = event.offsetY;
            })
            popup.mouseup(function(){
                updown = 0;
            })
            popup.mousemove(function(){
                px = event.pageX;
                py = event.pageY;
                if (updown == 1)
                {
                    $(".layer_popup").css({
                        top: py - oy - 6 + "px",
                        left: px - ox - 6 + "px"
                    })
                }
            })
            $(".popup_close").click(function(){
                $(".layer_popup").remove();
            })
////////////////////////////////////////////////////////////
////////////////////////////메뉴 펼치기////////////////////////
            $(".menu_li").mouseenter(function(){
                $(".menu_pan").css({
                    height: "300px"
                })
            })
            $(".menu_li").mouseleave(function(){
                $(".menu_pan").css({
                    height: "0px"
                })
            })
            $(".menu_pan").mouseenter(function(){
                $(".menu_pan").css({
                    height: "300px"
                })
            })
            $(".menu_pan").mouseleave(function(){
                $(".menu_pan").css({
                    height: "0px"
                })
            })
            let index;
            $(".menu_li").mouseenter(function(){
                $(".pan").css({
                    display: "none"
                })
                index = $(this).index();
                $(".pan").eq(index).css({
                    display: "block"
                })
            })
////////////////////////////////////////////////////////////
////////////////////////////메뉴 끌고댕기기/////////////////////
            let h_top = $(".menu_ul").offset().top;
            $(window).scroll(function(){
                let s_top = $(window).scrollTop();
                console.log(h_top, s_top + 40);
                if (h_top <= s_top + 40)
                {
                    $(".menu_ul").css({
                        top: s_top
                    })
                }
                else if (h_top > s_top + 40)
                {
                    $(".menu_ul").css({
                        top: "190px"
                    })
                }
            })

////////////////////////////////////////////////////////////
/////////////////////sec에 리스트 채우기////////////////////////

            function make_list(){
                for (let i = 0; i < cate_arr.length; i++)
                {
                    let list = `
                    <div class="sec" id="${cate_arr[i]}">
                        <div class="sec_title"></div>
                        <div class="sec_body"></div>
                    </div>`;
                    $(".container").append(list);
                }
            }
            function load_list(cate_index, show_qty)
            {
                $(`#${cate_arr[cate_index]} .sec_title`).text(cate_arr[cate_index].toUpperCase());
                let rs = ITEM_LIST[cate_index];
                for (let i = 0; i < show_qty; i++)
                {
                    let list = `<div class="item_box">
                                <div class="item_img">
                                    <img src="${rs[i].src}" alt="">
                                </div>
                                <div class="item_info">
                                    <div class="item_title">
                                        ${rs[i].name}
                                    </div>
                                    <div class="item_price">
                                        ${rs[i].price}
                                    </div>
                                    <div class="item_desc">
                                        ${rs[i].desc}
                                    </div>
                                </div>
                            </div>`;
                    $(`#${cate_arr[cate_index]} > .sec_body`).append(list);
                }
            }
            let cate_arr = ["best", "new", "top", "bottom"];
            make_list();
            load_list(0, 8);
            load_list(1, 8);
            load_list(2, 8);
        })
    </script>
</body>
</html>